#summary Details on accommodations for Scala made in BridJ
#labels Featured
<wiki:toc max_depth="3" />

= Introduction =

BridJ is a Java `<->` C / C++ / Objective-C / C# interop library.

This means Java the language but also more widely the JVM and its hosted languages.

This page describes what was done in BridJ to specifically ease up use from Scala.

= Pointer =

BridJ's pointer was designed to behave like a list, so provided you import `scala.collection.JavaConversions._` you'll already feel at home.

It also implements apply and update, so it's really simple to use from Scala.

<table><tr valign="top"><td colspan="2">
C code :
{{{
float array1d[100];
float array2d[100][200];
float array3d[100][200][300];

float v1 = array1d[10];
float v2 = array2d[10][20];
float v3 = array3d[10][20][30];
}}}
</td></tr><tr valign="top"><td>
Scala code :
{{{
import org.bridj.Pointer._

val array1d = pointerToFloats(100)
val array2d = pointerToFloats(100, 200)
val array3d = pointerToFloats(100, 200, 300)

val v1 = array1d(10)
val v2 = array2d(10)(20)
val v3 = array3d(10)(20)(30)
}}}
</td><td>
Java code :
{{{
import org.bridj.Pointer;
import static org.bridj.Pointer.*;
...
Pointer<Float> array1d = 
    pointerToFloats(100);
Pointer<Pointer<Float>> array2d = 
    pointerToFloats(100, 200);
Pointer<Pointer<Pointer<Float>>> array3d = 
    pointerToFloats(100, 200, 300);

float v1 = array1d.get(10);
float v2 = array2d.get(10).get(20);
float v3 = array3d.get(10).get(20).get(30);
}}}
</td></tr></table>

= Structs = 

When using [http://code.google.com/p/jnaerator/ JNAerator] to create BridJ structs, you can use the `-scalaSetters` switch to generate setters in the form `MyStruct.myField_=` that are treated like setters by Scala.

These setters do not replace the usual generated setters, they're final and just call the usual setters.

<table><tr valign="top"><td colspan="2">
C struct and code :
{{{
typedef struct S {
    int a;
    double d;
} S;

S s;
s.a = 10;
s.d = 10.0;
}}}
</td></tr><tr valign="top"><td>
Scala code :
{{{
// Using autogenerated S structure code
val s = new S.a(10).d(10.0)
}}}
Scala code (using setters) :
{{{
val s = new S
s.a = 10
s.d = 10.0
}}}
</td><td>
Java code :
{{{
S s = new S().a(10).d(10.0)
}}}
</td></tr></table>